# User Story: Lab View Overhaul (Team + Models + Lab Overview Dashboard)

## Goal

Transform the **lab** top-level view from a minimal “public/private models list” into a **useful, beautiful Lab HQ** that:

- Shows the player’s **lab identity** (name, persona/co-founder, overview stats)
- Shows **team members** (co-founder + hired contracts) with clear effects/abilities
- Shows **trained models inventory** with rich metadata and publish controls
- Uses a consistent **card style** aligned with Operate, but tailored for Lab content
- Supports the new direction: jobs depend on models, models can be published, and published models power leaderboards

This story intentionally replaces the current “lab looks like a city” vibe with a clean HQ/dashboard presentation.

---

## Lab IA (Information Architecture)

### Top-level: lab

Lab has a second-level subnav (like Operate):

1. **team**
2. **models**

A persistent **Lab Overview Header** is always shown at the top of lab (regardless of subnav).

---

## Lab Overview Header (Always Visible)

Show the most important “my lab right now” information in a clean header (cards or a compact grid):

### Identity

- Lab name (prominent)
- Persona/co-founder name + role label (e.g., “technical founder” / “business founder”)
- Small lab icon/logo (generated during onboarding, if present)

### Resources (live values)

- Money (bank balance)
- Research Points (RP)
- Level + XP progress (level number + progress bar)
- Queue slots (used/total)
- GPU capacity (used/total) _(if implemented; otherwise placeholder)_

### Status & Rank (optional but recommended)

- Global rank (if available) or “unranked”
- Published models count (public)
- Active contracts count / active team boosts
- Active jobs count (deep link to operate)

Header must include deep links:

- “go to operate” (queue)
- “go to research”
- “go to world (leaderboards)”

---

## Subnav 1: Team

### Team page layout

Two sections:

1. **Core Team**
2. **Contracts / Hires** (temporary power-ups)

#### Core Team (required)

Display the selected persona/co-founder created during onboarding:

- Name
- Persona type: technical founder / business founder
- Abilities summary (clear bullet list)
- Tool access flavor (CLI vs IDE presentation) if implemented
- Passive modifiers (if any), with explicit values
  - example: “-5% GPU cost on training jobs”
  - example: “+5% payout on work jobs”

Also show “What this affects” section:

- impacts on operate job costs/rewards
- impacts on availability of early job categories (if relevant)
- impacts on starting kit/unlocks (if used)

#### Contracts / Hires (required)

List currently active hired people/boosts:

- Name + role (e.g. “ML engineer”, “sales closer”, “gpu whisperer”)
- Duration remaining (e.g. “2d 4h left”)
- Effects (explicit numbers)
- Affected categories (e.g. “Training”, “Work jobs”, “World expansion”)
- Status: active / expired (expired visible in history)

Include filters:

- Active
- Expired (history)

Include a “Hire history” section (collapsed by default) to show previously used hires.

### Visual style

- Use the same base card components as Operate (consistent design system)
- Team cards show:
  - avatar/icon
  - effect chips
  - duration chips
  - “affects” tags (training/work/world)

---

## Subnav 2: Models

### Models page goals

Players must:

- see all trained models they own (inventory)
- understand model quality and relevance
- choose what is public vs private
- understand which models are leaderboard-eligible
- quickly find a model needed for a job requirement

### Models inventory list

Show models as cards (Operate-style), with richer details:

Each model card includes:

- Model name
- Type (LLM / vision / image / video)
- Size (e.g. 7B, 17B)
- Trained timestamp + version
- Key metrics (score, speed, cost) as small chips
- Visibility toggle: **private / public**
- Leaderboard eligibility indicator:
  - if public: “eligible”
  - if private: “not eligible”
- “view details” (optional)
- “use in job” deep link (optional)

### Filters (not subnav)

Keep the subnav as **team/models** only.
Inside Models, use filter chips:

- All
- Public
- Private
- Eligible (public + meets threshold, if you add thresholds)
- Type chips (LLM, Vision, Image, Video)
- Sort dropdown: newest, highest score, most used, etc.

### Publishing UX rules

- Toggling public/private updates immediately:
  - World → public lab profile
  - World → leaderboards eligibility
- Show a toast/message:
  - “published: now visible to others and eligible for leaderboards”
  - “set to private: removed from public profile and leaderboards”

---

## Lab Visual Direction (Replace “City” with HQ Dashboard)

Lab should not look like a “city view” at all.
Preferred vibe:

- clean “control room / HQ” dashboard
- information-dense but readable
- consistent with Operate cards

Optional “Office look” (nice-to-have, not required)
If you want a “how does our office look” element:

- add a small cosmetic preview card in the Lab Overview Header:
  - “HQ: garage lab / coworking space / penthouse / underground bunker”
- cosmetics can be unlocked later; for now it can be a simple label.

---

## Data + Sync Requirements

### Lab must always reflect current authoritative state:

- resources (money/rp/xp/level)
- queue slots and usage
- GPU capacity (when implemented)
- team effects currently active
- models inventory + visibility

### On relevant events:

1. When a job completes (operate)

- new trained model appears in lab → models immediately
- inbox message deep links to that model

2. When visibility toggles (lab)

- world public lab updates immediately
- leaderboard queries reflect immediately

3. When a hire starts/ends (operate or inbox action)

- lab team list updates immediately

---

## Implementation Notes (Migration)

- Replace existing lab page layout (currently “public/private models” and “city look”) with:
  - Lab Overview Header
  - Subnav: Team / Models
- Reuse Operate card components for consistent style.
- Ensure models are shown as **trained instances** (not just blueprints).
- Ensure lab name + co-founder are pulled from onboarding state.

---

## Acceptance Criteria

1. Lab is a top-level nav item and shows a Lab Overview Header with identity + resources + status.
2. Lab subnav includes **team** and **models** (and only those).
3. Team view shows:
   - co-founder persona with explicit abilities/effects
   - active hires with remaining duration and effects
   - history of expired hires
4. Models view shows:
   - all trained model instances with metadata
   - public/private toggle
   - clear leaderboard eligibility indicator
   - filters for public/private and type
5. Lab uses consistent card styling with Operate and does not use the “city view” layout.
6. Changes stay in sync:
   - job completion adds models
   - visibility toggle updates world + leaderboards
   - hire changes update team list
